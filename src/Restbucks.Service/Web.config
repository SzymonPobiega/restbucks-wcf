<?xml version="1.0" encoding="UTF-8"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <configSections>
    <sectionGroup name="webioelmah">
      <section name="security" requirePermission="false" type="WebioElmah.SecuritySectionHandler, WebioElmah, Version=1.1.11517.0,Culture=neutral, PublicKeyToken=93297c12d98e0131"/>
      <section name="errorLog" requirePermission="false" type="WebioElmah.ErrorLogSectionHandler, WebioElmah, Version=1.1.11517.0,Culture=neutral, PublicKeyToken=93297c12d98e0131" />
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="baseAddress" value="http://restbucks.net" />
  </appSettings>
  <system.web>
    <webioelmah>
      <security allowRemoteAccess="yes" />
      <errorLog type="WebioElmah.XmlFileErrorLog, WebioElmah, Version=1.1.11517.0,Culture=neutral, PublicKeyToken=93297c12d98e0131" logPath="~/App_Data"  />
    </webioelmah>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
      <add name="ErrorLog" type="WebioElmah.ErrorLogModule, WebioElmah, Version=1.1.11517.0, Culture=neutral, PublicKeyToken=93297c12d98e0131" preCondition="managedHandler" />
    </modules>
    <directoryBrowse enabled="false" />
    <defaultDocument>
      <files>
        <clear />
        <add value="Default.htm" />
        <add value="Default.asp" />
        <add value="index.htm" />
        <add value="index.html" />
        <add value="iisstart.htm" />
        <add value="default.aspx" />
        <add value="index.php" />
      </files>
    </defaultDocument>
    <rewrite>
      <rules>
        <rule name="Rewrite to order">
          <match url="order" />
          <action type="Rewrite" url="order.svc" />
        </rule>
        <rule name="Rewrite to payment">
          <match url="order" />
          <action type="Rewrite" url="payment.svc" />
        </rule>
        <rule name="Rewrite to receipt">
          <match url="order" />
          <action type="Rewrite" url="receipt.svc" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true">
      <baseAddressPrefixFilters>
        <add prefix="http://restbucks.net" />
      </baseAddressPrefixFilters>
      <serviceActivations>
        <add factory="Restbucks.Service.RestbucksHostFactory, Restbucks.Service" service="Restbucks.Service.Resources.OrderResource" relativeAddress="order.svc"/>
        <add factory="Restbucks.Service.RestbucksHostFactory, Restbucks.Service" service="Restbucks.Service.Resources.PaymentResource" relativeAddress="payment.svc"/>
        <add factory="Restbucks.Service.RestbucksHostFactory, Restbucks.Service" service="Restbucks.Service.Resources.ReceiptResource" relativeAddress="receipt.svc"/>
      </serviceActivations>
    </serviceHostingEnvironment>
  </system.serviceModel>
</configuration>